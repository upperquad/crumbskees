<html ng-app="phoneApp">
  <head>
    <title>Controller - Upperquad SFDW 2019</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  </head>
  <body ng-controller="PhoneController as phoneCtrl" ng-class="{'is-ready': phoneCtrl.ready}">
    <div id="touchpad" ng-class="['touchpad', {'is-shown': (phoneCtrl.accepted && phoneCtrl.userConfirmed && phoneCtrl.result === null)}]">
      <img src="{{phoneCtrl.character.image}}" />
      <div class="score">
        {{phoneCtrl.score}}
      </div>
      <div class="touch-bubble" id="touch-bubble"></div>
    </div>
    <div class="connecting" ng-if="phoneCtrl.isConnecting">Connecting</div>
    <div class="token-pad" ng-if="!phoneCtrl.connected && !phoneCtrl.isConnecting">
      <div class="token-instruction">Enter code to join the game</div>
      <div class="token-display">
        <div class="token-error" ng-if="phoneCtrl.invalidToken">Invalid token</div>{{phoneCtrl.token}}
      </div>
      <div class="token-input">
        <div class="token-input-key"
            ng-repeat="i in [1, 2, 3, 4, 5, 6, 7, 8, 9, 0]"
            ng-click="phoneCtrl.tokenKey(i)">{{i}}</div>
        <div class="token-input-key"
            ng-click="phoneCtrl.tokenKey(-1)">‚Üê</div>
      </div>
    </div>
    <div class="character-confirm" ng-if="(phoneCtrl.accepted && !phoneCtrl.userConfirmed)">
      <div class="confirm__meet">Meet your character:</div>
      <img src="{{phoneCtrl.character.image}}" />
      <div class="confirm__button" role="button" ng-click="phoneCtrl.handleConfirm()">Start</div>
    </div>
    <div class="result" ng-if="phoneCtrl.result !== null">
      <div class="result__text">{{phoneCtrl.result !== 'tied' ? 'You ' : null}}{{phoneCtrl.result}}</div>
      <img src="{{phoneCtrl.character.image}}" />
      <div class="score">
        {{phoneCtrl.score}}
      </div>
    </div>
  </body>
</html>
